parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";function t(t){return r(t)||n(t)||a(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t){if(Array.isArray(t))return i(t)}function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var c=Array.from(document.getElementsByClassName("field_cell")),u=document.querySelector(".start"),f=document.querySelector(".restart"),s=document.querySelector(".message_start"),l=document.querySelector(".message_win"),d=document.querySelector(".message_lose"),v=document.querySelector(".game_score");function h(){return Math.floor(Math.random()*c.length)}function m(){return Math.random()>.1?2:4}function y(){var t,e=o(c);try{for(e.s();!(t=e.n()).done;){for(var n=t.value,r=n.textContent,a="field_cell--".concat(r),i=1;i<=2048;i*=2)n.classList.remove("field_cell--".concat(i));r&&n.classList.add(a)}}catch(u){e.e(u)}finally{e.f()}}function x(){v.textContent=c.reduce(function(t,e){return t+ +e.textContent},0);for(var t=0;t<c.length;t++)c[t].textContent>=2048&&l.classList.remove("hidden")}function C(){for(var t=h(),e=h();t===e;)e=h();c[t].textContent=m(),c[e].textContent=m(),y(),u.classList.add("hidden"),f.classList.remove("hidden"),s.classList.add("hidden"),x(),d.classList.add("hidden"),l.classList.add("hidden")}function g(){var t,e=o(c);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.classList.remove("field_cell--".concat(n.textContent)),n.textContent=""}}catch(r){e.e(r)}finally{e.f()}C()}function p(){var t,e=[],n=o(c);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.textContent||e.push(r)}}catch(a){n.e(a)}finally{n.f()}e.length&&(e[Math.floor(Math.random()*e.length)].textContent=m(),y())}function b(){document.addEventListener("keydown",w,{once:!0})}function w(t){switch(t.key){case"ArrowUp":D("up");break;case"ArrowDown":D("down");break;case"ArrowLeft":D("left");break;case"ArrowRight":D("right");break;default:return void b()}b()}u.addEventListener("click",C),f.addEventListener("click",g),b();for(var S=4,A=4,L=[],k=0;k<S;k++){for(var _=[],E=0;E<A;E++){var q=k*A+E;_.push(c[q])}L.push(_)}for(var M=L.map(function(e){return t(e).reverse()}),j=[],I=0;I<A;I++){for(var O=[],T=0;T<S;T++){var U=T*A+I;O.push(c[U])}j.push(O)}var B=j.map(function(e){return t(e).reverse()});function D(t){var e,n=!1;switch(t){case"up":e=j;break;case"down":e=B;break;case"left":e=L;break;case"right":e=M}for(var r=0;r<4;r++)R(e)&&(n=!0);n&&p(),x(),y(),N()}function N(){var t,e=o(c);try{for(e.s();!(t=e.n()).done;){t.value.merged=!1}}catch(n){e.e(n)}finally{e.f()}}function R(t){var e=!1;return t.forEach(function(t){$(t)&&(e=!0)}),e}function $(t){z()||d.classList.remove("hidden");for(var e=!1,n=1;n<t.length;n++)if(t[n].textContent){var r=t[n],o=t[n-1];if(!r.textContent||!o.textContent||r.textContent===o.textContent)for(var a=n-1;a>=0;a--){var i=t[a];if(i){var c=i.textContent,u=i.merged;c?c!==r.textContent||r.merged||u||(i.textContent=+c+ +r.textContent,r.textContent="",r.merged=!0,i.merged=!0,e=!0):(i.textContent=r.textContent,r.textContent="",e=!0)}}}return e}function z(){for(var t=0;t<c.length;t++)if(!c[t].textContent)return!0;for(var e=0;e<c.length;e++){var n,r=c[e],a=o(F(r));try{for(a.s();!(n=a.n()).done;){if(n.value.textContent===r.textContent)return!0}}catch(i){a.e(i)}finally{a.f()}}return!1}function F(t){var e=[],n=c.indexOf(t),r=n%4!=0,o=n>=4,a=n%4!=3,i=n<c.length-4;return r&&e.push(c[n-1]),o&&e.push(c[n-4]),a&&e.push(c[n+1]),i&&e.push(c[n+4]),e}
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.747da972.js.map